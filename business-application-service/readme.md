Business Application Service
=============================

This project was generated by https://start.jbpm.org/

It is a Spring Boot runtime based Kie Server used to execute Business Rules and Decision Models packaged as KJARs.

Alternatively use the following command to bootstrap a Business Application using the [KIE Service Spring Boot Archetype](https://github.com/kiegroup/droolsjbpm-knowledge/tree/master/kie-archetypes/kie-service-spring-boot-archetype):

```
mvn archetype:generate \
   -DarchetypeGroupId=org.kie \
   -DarchetypeArtifactId=kie-service-spring-boot-archetype \
   -DarchetypeVersion=7.50.0.Final \
   -DappType=brm
```

> NOTE: remember to update the `application.properties` or configure the `kie-maven-plugin` to properly add reference to your decision/rules kjar artifact dependency.

> the Kie Server **state file** used to start the Kie Container for the Decision Showcase project **KJAR** is: `src/business-application-service.xml`.
> note that the Scanner is configured to scan the kjar each 60secs. Thus you can change your rules, rebuild the kjar for demo purpose.

> Starting with version `7.44.0.Final` you can use the `kie-maven-plugin` to package your kjar in the spring boot uberjar. Add these props in your Spring Boot `application.properties`:
```
kieserver.classPathContainer=true
kieserver.autoScanDeployments=true
```

and configure your Spring Boot app `kie-maven-plugin` in your pom.xml like this:
```xml
  <build>
    <plugins>
      <plugin>
        <groupId>org.kie</groupId>
        <artifactId>kie-maven-plugin</artifactId>
        <version>${version.org.kie}</version>
        <executions>
          <execution>
            <id>copy</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>package-dependencies-kjar</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <artifactItems>
            <artifactItem>
              <groupId>com.myspace</groupId>
              <artifactId>your kjar artifcat id</artifactId>
              <version>1.0.0-SNAPSHOT</version>
            </artifactItem>
          </artifactItems>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
```

> If want to enable swagger Api Docs on your Spring Boot based application add these deps in your `pom.xml`

```xml
    <dependency>
      <groupId>org.apache.cxf</groupId>
      <artifactId>cxf-rt-rs-service-description-swagger</artifactId>
      <version>3.2.6</version>
    </dependency>
    <dependency>
      <groupId>io.swagger</groupId>
      <artifactId>swagger-jaxrs</artifactId>
      <version>1.5.15</version>
      <exclusions>
        <exclusion>
          <groupId>javax.ws.rs</groupId>
          <artifactId>jsr311-api</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.webjars</groupId>
      <artifactId>swagger-ui</artifactId>
      <version>3.43.0</version>
    </dependency>
```

and add this property on your `application.properties`
```
kieserver.swagger.enabled=true
```

For more details on how customize and configure the Kie Server on Spring Boot check the official Docs at https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/integrating_red_hat_process_automation_manager_with_other_products_and_components/index#assembly-springboot-business-apps

## Build the Spring Boot app

```
mvn clean install
```

## Start your Business Application Service

```
java -jar target/business-application-service-1.0-SNAPSHOT.jar
```

## Access the Kie Server (Swagger) API Docs

http://localhost:8090/rest/api-docs?url=http://localhost:8090/rest/swagger.json

you can authenticate with `kieserver/kieserver1!`